import{u as v,r as a,j as e,N as C,P,F as w,a as n}from"./index-D2Ipw2YP.js";import{F}from"./filter-CPbTBQz0.js";const A=()=>{const[p,d]=v(),[i,c]=a.useState([]),[h,g]=a.useState([]),[b,m]=a.useState(!0),l=p.get("category"),[u,f]=a.useState(!1);a.useEffect(()=>{(async()=>{m(!0);try{const t=await n.getAllCategories();if(g(t),l){const o=await n.getProductsByCategory(l);c(o)}else{const o=await n.getAllProducts();c(o)}}catch(t){console.error("Erreur lors du chargement des produits:",t)}finally{m(!1)}})()},[l]);const j=s=>{d({category:s})},N=()=>{d({})},[r,x]=a.useState({min:"",max:""}),y=()=>{let s=[...i];r.min&&(s=s.filter(t=>t.price>=parseFloat(r.min))),r.max&&(s=s.filter(t=>t.price<=parseFloat(r.max))),c(s)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("main",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"section-container",children:[e.jsxs("div",{className:"text-center mb-16 animate-fade-up",children:[e.jsx("h1",{className:"section-title",children:"Notre Collection"}),e.jsx("p",{className:"section-subtitle max-w-2xl mx-auto",children:"Parcourez notre sélection de fleurs fraîches, bouquets, plantes et décorations."})]}),b?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-pulse",children:e.jsx("p",{children:"Chargement des produits..."})})}):e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("button",{className:"lg:hidden flex items-center justify-center gap-2 w-full py-3 border border-border rounded-md mb-4",onClick:()=>f(!u),children:[e.jsx(F,{size:18}),"Filtrer les produits"]}),e.jsx("aside",{className:`lg:w-1/4 ${u?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"sticky top-24 bg-white p-6 rounded-lg border border-border",children:[e.jsx("h3",{className:"font-serif text-xl mb-4",children:"Catégories"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{className:`w-full text-left py-2 px-3 rounded-md transition-colors ${l?"hover:bg-muted":"bg-primary/10 text-primary"}`,onClick:N,children:"Tous les produits"})}),h.map(s=>e.jsx("li",{children:e.jsx("button",{className:`w-full text-left py-2 px-3 rounded-md transition-colors ${l===s.id?"bg-primary/10 text-primary":"hover:bg-muted"}`,onClick:()=>j(s.id),children:s.name})},s.id))]}),e.jsxs("div",{className:"border-t border-border my-6 pt-6",children:[e.jsx("h3",{className:"font-serif text-xl mb-4",children:"Prix"}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx("input",{type:"number",placeholder:"Min",className:"w-full border border-border rounded-md p-2",value:r.min,onChange:s=>x({...r,min:s.target.value})}),e.jsx("span",{children:"à"}),e.jsx("input",{type:"number",placeholder:"Max",className:"w-full border border-border rounded-md p-2",value:r.max,onChange:s=>x({...r,max:s.target.value})})]}),e.jsx("button",{className:"w-full bg-muted py-2 rounded-md hover:bg-muted/80 transition-colors",onClick:y,children:"Appliquer"})]})]})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsx(P,{product:s},s.id))}),i.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"Aucun produit trouvé."})})]})]})]})}),e.jsx(w,{})]})};export{A as default};
