import{z as l,r as g,v as U,Q as H,j as e,x as O,y as c,D as o,E as d,G as m,I as N,K as f,ab as K,B as t,X as Q,ac as I,aa as X,ad as $,ae as G,a1 as z,a2 as E,a3 as M,a4 as w,O as J,J as T,$ as L}from"./index-D2Ipw2YP.js";import{C as _,a as W,c as Y,e as Z}from"./card-CcKSh10K.js";import{T as ee,a as se,b as A,c as v,d as re,e as u}from"./table-CBTVJ1-_.js";import{D as ae,a as ie,b as ne,c as le}from"./dialog-Bh1R_dux.js";import{T as te}from"./textarea-BXYulBZ9.js";import{S as R}from"./switch-BrxpkcwD.js";import{S as ce,a as oe,b as de,c as me,d as xe}from"./select-CkDa4oYz.js";import{P as V}from"./plus--fUcP0bL.js";import{F as he}from"./filter-CPbTBQz0.js";import{E as je}from"./ellipsis-vertical-CGtGoFNX.js";import{S as ue}from"./square-pen-DqwtdDjd.js";import{C as ge}from"./copy-DDwoH1Tt.js";import{T as pe}from"./trash-2-BNQ_4_77.js";import"./index-BycQlkId.js";import"./index-DByQH1EK.js";const fe=l.object({name:l.string().min(3,{message:"Le nom du produit doit contenir au moins 3 caractères"}),description:l.string().min(10,{message:"La description doit contenir au moins 10 caractères"}),price:l.coerce.number().positive({message:"Le prix doit être un nombre positif"}),stock:l.coerce.number().int().nonnegative({message:"Le stock doit être un nombre entier positif ou zéro"}),category:l.string({required_error:"Veuillez sélectionner une catégorie"}),sku:l.string().optional(),weight:l.coerce.number().positive().optional(),popular:l.boolean().default(!1),featured:l.boolean().default(!1)});function ve({product:s,categories:b,onSubmit:C,onCancel:F}){const[p,x]=g.useState((s==null?void 0:s.images)||[]),[h,k]=g.useState(""),i=U({resolver:H(fe),defaultValues:{name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",price:(s==null?void 0:s.price)||0,stock:(s==null?void 0:s.stock)||0,category:(s==null?void 0:s.category)||"",sku:(s==null?void 0:s.sku)||"",weight:(s==null?void 0:s.weight)||0,popular:(s==null?void 0:s.popular)||!1,featured:(s==null?void 0:s.featured)||!1}}),P=r=>{const n={id:(s==null?void 0:s.id)||`prod-${Date.now()}`,name:r.name,description:r.description,price:r.price,stock:r.stock,images:p,category:r.category,popular:r.popular,featured:r.featured,sku:r.sku,weight:r.weight};C(n)},y=()=>{h&&!p.includes(h)&&(x([...p,h]),k(""))},D=r=>{x(p.filter((n,S)=>S!==r))};return e.jsx(O,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(P),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{control:i.control,name:"name",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Nom du produit"}),e.jsx(m,{children:e.jsx(N,{placeholder:"Bouquet de roses rouges",...r})}),e.jsx(f,{})]})}),e.jsx(c,{control:i.control,name:"price",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Prix (XAF)"}),e.jsx(m,{children:e.jsx(N,{type:"number",step:"0.01",...r})}),e.jsx(f,{})]})}),e.jsx(c,{control:i.control,name:"stock",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Stock"}),e.jsx(m,{children:e.jsx(N,{type:"number",...r})}),e.jsx(f,{})]})}),e.jsx(c,{control:i.control,name:"category",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Catégorie"}),e.jsxs(ce,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(oe,{children:e.jsx(de,{placeholder:"Sélectionner une catégorie"})})}),e.jsx(me,{children:b.map(n=>e.jsx(xe,{value:n.id,children:n.name},n.id))})]}),e.jsx(f,{})]})}),e.jsx(c,{control:i.control,name:"sku",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"SKU (Référence)"}),e.jsx(m,{children:e.jsx(N,{placeholder:"SKU-12345",...r})}),e.jsx(f,{})]})}),e.jsx(c,{control:i.control,name:"weight",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Poids (kg)"}),e.jsx(m,{children:e.jsx(N,{type:"number",step:"0.01",...r})}),e.jsx(f,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{control:i.control,name:"description",render:({field:r})=>e.jsxs(o,{children:[e.jsx(d,{children:"Description"}),e.jsx(m,{children:e.jsx(te,{placeholder:"Description détaillée du produit...",className:"min-h-[120px]",...r})}),e.jsx(f,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Images du produit"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{type:"url",placeholder:"URL de l'image",value:h,onChange:r=>k(r.target.value)}),e.jsx(t,{type:"button",variant:"outline",size:"icon",onClick:y,children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:p.map((r,n)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:`Product image ${n+1}`,className:"h-24 w-full object-cover rounded-md border",onError:S=>{S.target.src="/placeholder.svg"}}),e.jsx(t,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-6 w-6 opacity-80",onClick:()=>D(n),children:e.jsx(Q,{className:"h-3 w-3"})})]},n))})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(c,{control:i.control,name:"popular",render:({field:r})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Produit populaire"}),e.jsx(I,{children:"Marquer ce produit comme populaire"})]}),e.jsx(m,{children:e.jsx(R,{checked:r.value,onCheckedChange:r.onChange})})]})}),e.jsx(c,{control:i.control,name:"featured",render:({field:r})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Produit en vedette"}),e.jsx(I,{children:"Mettre ce produit en avant sur la page d'accueil"})]}),e.jsx(m,{children:e.jsx(R,{checked:r.value,onCheckedChange:r.onChange})})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(t,{type:"button",variant:"outline",onClick:F,children:"Annuler"}),e.jsx(t,{type:"submit",children:s?"Mettre à jour":"Créer le produit"})]})]})})}const Ee=()=>{const[s,b]=g.useState([]),[C,F]=g.useState(""),[p,x]=g.useState(!1),[h,k]=g.useState([]),[i,P]=g.useState(null);g.useEffect(()=>{b(X()),k($())},[]);const y=s.filter(a=>a.name.toLowerCase().includes(C.toLowerCase())||a.category.toLowerCase().includes(C.toLowerCase())),D=a=>{b(s.filter(j=>j.id!==a)),T.success("Produit supprimé",{description:"Le produit a été supprimé avec succès."})},r=a=>{P(a),x(!0)},n=()=>{P(null),x(!0)},S=a=>{i?(b(s.map(j=>j.id===a.id?a:j)),T.success("Produit mis à jour",{description:"Le produit a été mis à jour avec succès."})):(b([...s,a]),T.success("Produit ajouté",{description:"Le produit a été ajouté avec succès."})),x(!1)},B=a=>a>10?e.jsx(L,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:"En stock"}):a>0?e.jsx(L,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:"Stock faible"}):e.jsx(L,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Rupture"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Produits"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez votre catalogue de produits."})]}),e.jsxs(t,{onClick:n,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Ajouter un produit"]})]}),e.jsxs(_,{children:[e.jsx(W,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(G,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(N,{type:"search",placeholder:"Rechercher un produit...",className:"pl-8",value:C,onChange:a=>F(a.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Filtres"]}),e.jsxs(z,{children:[e.jsx(E,{asChild:!0,children:e.jsx(t,{variant:"outline",size:"sm",children:"Catégories"})}),e.jsxs(M,{align:"end",children:[e.jsx(w,{children:"Tous les produits"}),h.map(a=>e.jsx(w,{children:a.name},a.id))]})]})]})]})}),e.jsx(Y,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(A,{children:[e.jsx(v,{className:"w-[80px]",children:"Image"}),e.jsx(v,{children:"Produit"}),e.jsx(v,{children:"Catégorie"}),e.jsx(v,{className:"text-right",children:"Prix"}),e.jsx(v,{className:"text-center",children:"Stock"}),e.jsx(v,{className:"text-center",children:"Statut"}),e.jsx(v,{className:"w-[70px]",children:"Actions"})]})}),e.jsxs(re,{children:[y.map(a=>{const j=h.find(q=>q.id===a.category);return e.jsxs(A,{children:[e.jsx(u,{children:e.jsx("div",{className:"h-12 w-12 rounded-md overflow-hidden bg-muted",children:e.jsx("img",{src:a.images&&a.images.length>0?a.images[0]:"/placeholder.svg",alt:a.name,className:"h-full w-full object-cover"})})}),e.jsx(u,{className:"font-medium",children:a.name}),e.jsx(u,{children:(j==null?void 0:j.name)||a.category}),e.jsxs(u,{className:"text-right",children:[a.price.toFixed(2)," XAF"]}),e.jsx(u,{className:"text-center",children:a.stock||0}),e.jsx(u,{className:"text-center",children:B(a.stock||0)}),e.jsx(u,{children:e.jsxs(z,{children:[e.jsx(E,{asChild:!0,children:e.jsx(t,{variant:"ghost",size:"icon",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",children:[e.jsxs(w,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Voir"]}),e.jsxs(w,{onClick:()=>r(a),children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e.jsxs(w,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Dupliquer"]}),e.jsxs(w,{className:"text-destructive focus:text-destructive",onClick:()=>D(a.id),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},a.id)}),y.length===0&&e.jsx(A,{children:e.jsx(u,{colSpan:7,className:"h-24 text-center",children:"Aucun produit trouvé."})})]})]})})}),e.jsxs(Z,{className:"flex items-center justify-between border-t p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Affichage de ",y.length," sur ",s.length," produits"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",disabled:!0,children:"Précédent"}),e.jsx(t,{variant:"outline",size:"sm",disabled:!0,children:"Suivant"})]})]})]}),e.jsx(ae,{open:p,onOpenChange:x,children:e.jsxs(ie,{className:"sm:max-w-[725px] max-h-[85vh] overflow-y-auto",children:[e.jsx(ne,{children:e.jsx(le,{children:i?"Modifier un produit":"Ajouter un produit"})}),e.jsx(ve,{categories:h,product:i,onSubmit:S,onCancel:()=>x(!1)})]})})]})};export{Ee as default};
