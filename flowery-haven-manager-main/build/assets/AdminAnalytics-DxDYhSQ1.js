import{i as Y,r as t,j as e,_ as L,a as R}from"./index-D2Ipw2YP.js";import{C as r,a as l,b as d,c as i,d as p}from"./card-CcKSh10K.js";import{T as U,a as E,b as o}from"./tabs-BkT1Db25.js";import{Q as O}from"./QuoteService-BK9A249e.js";import{S as P}from"./shopping-cart-CmlZFuwr.js";import{U as D}from"./users-DT-twiI5.js";import{C as M}from"./calendar-DcxNRdDE.js";import{R as Q,H,I as k,X as q,Y as V,J as I,N as K,K as B,M as F}from"./BarChart-BjNmOQbW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),c={DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly"},se=()=>{const[g,x]=t.useState(!0),[a,v]=t.useState(c.MONTHLY),[N,y]=t.useState([]),[m,b]=t.useState({totalOrders:0,totalRevenue:0,averageOrderValue:0}),[u,w]=t.useState({totalQuotes:0,acceptedQuotesRate:0}),[S,T]=t.useState([]),[h,A]=t.useState({totalUsers:0,newUsersThisMonth:0});return t.useEffect(()=>{(async()=>{try{x(!0);const s=await L.getOrderAnalytics(a);b({totalOrders:s.total,totalRevenue:s.revenue,averageOrderValue:s.averageValue}),y(s.salesByPeriod);const j=await O.getQuoteAnalytics(a);w({totalQuotes:j.total,acceptedQuotesRate:j.acceptedRate});const C=await R.getTopSellingProducts(5);T(C);const f=await UserService.getUserAnalytics(a);A({totalUsers:f.total,newUsersThisMonth:f.newThisMonth})}catch(s){console.error("Erreur lors du chargement des analyses:",s)}finally{x(!1)}})()},[a]),g?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytiques"}),e.jsx("p",{className:"text-muted-foreground",children:"Tableau de bord des performances"})]})}),e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-10 bg-muted rounded-md w-full max-w-md"}),e.jsx("div",{className:"h-64 bg-muted rounded-md w-full"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytiques"}),e.jsx("p",{className:"text-muted-foreground",children:"Tableau de bord des performances"})]}),e.jsx("div",{children:e.jsx(U,{value:a,onValueChange:v,children:e.jsxs(E,{children:[e.jsx(o,{value:c.DAILY,children:"Journalier"}),e.jsx(o,{value:c.WEEKLY,children:"Hebdomadaire"}),e.jsx(o,{value:c.MONTHLY,children:"Mensuel"}),e.jsx(o,{value:c.YEARLY,children:"Annuel"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total des commandes"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.totalOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.totalRevenue.toFixed(2)," XAF de chiffre d'affaires"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Devis"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalQuotes}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(u.acceptedQuotesRate*100).toFixed(1),"% acceptés"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Utilisateurs"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.totalUsers}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.newUsersThisMonth," nouveaux ce mois-ci"]})]})]}),e.jsxs(r,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Période"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold capitalize",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vue d'ensemble"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Ventes"}),e.jsxs(p,{children:["Évolution des ventes ",a]})]}),e.jsx(i,{children:e.jsx(Q,{width:"100%",height:300,children:e.jsxs(H,{data:N,children:[e.jsx(k,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"period"}),e.jsx(V,{}),e.jsx(I,{}),e.jsx(K,{}),e.jsx(B,{dataKey:"revenue",fill:"#8884d8",name:"Chiffre d'affaires"})]})})})]}),e.jsxs(r,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Produits phares"}),e.jsx(p,{children:"Top 5 des produits les plus vendus"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:S.map((n,s)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-bold text-sm",children:s+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.category})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-4 w-4 mr-2 text-green-500"}),e.jsx("span",{className:"font-bold",children:n.salesCount})]})]},n.id))})})]})]})]})};export{se as default};
