import{b as O,c as X,r as n,d as K,e as _,j as e,N,F as v,L as G,A as Y,C as k,f as Z,S as ee,H as se,B as h,g as te,T as re,P as B,a as w,J as l}from"./index-D2Ipw2YP.js";import{S as ae}from"./separator-B4UgFw64.js";import{M as ie}from"./minus-DSzL0OlM.js";import{P as ne}from"./plus--fUcP0bL.js";import{L as le}from"./linkedin-DYpH3Lrh.js";import{C as oe}from"./copy-DDwoH1Tt.js";const y=[{name:"Rouge",value:"#DC2626"},{name:"Rose",value:"#EC4899"},{name:"Blanc",value:"#F9FAFB"},{name:"Jaune",value:"#FBBF24"},{name:"Bleu",value:"#3B82F6"}],pe=()=>{var R;const{id:o}=O(),I=X(),[s,L]=n.useState(null),[E,d]=n.useState(!0),[C,m]=n.useState(null),[a,u]=n.useState(1),[P,z]=n.useState(0),[T,S]=n.useState(!1),[p,A]=n.useState([]),[f,F]=n.useState(y[0]),[j,$]=n.useState([]),{addToCart:D}=K(),{addToWishlist:q,removeFromWishlist:Q,isInWishlist:g}=_();if(n.useEffect(()=>{(async()=>{if(window.scrollTo(0,0),!o){m("ID du produit manquant"),d(!1);return}try{d(!0),m(null);const r=await w.getProductById(o);if(!r){m("Produit non trouvé"),d(!1);return}L(r),u(1),z(0),F(y[0]);const c=w.getRecentlyViewedProducts();A(c.filter(i=>i.id!==o));try{const i=await w.getProductsByCategory(r.category);$(i.filter(M=>M.id!==o).slice(0,4))}catch(i){console.error("Error fetching related products:",i),$([])}}catch(r){console.error("Error fetching product:",r),m("Erreur lors du chargement du produit")}finally{d(!1)}})()},[o]),E)return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("main",{className:"pt-32 pb-16 min-h-screen",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),e.jsx("p",{children:"Chargement du produit..."})]})})}),e.jsx(v,{})]});if(C||!s)return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("main",{className:"pt-32 pb-16 min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-serif mb-4",children:"Produit non trouvé"}),e.jsx("p",{className:"mb-8",children:C||"Le produit que vous recherchez n'existe pas ou a été retiré."}),e.jsx(G,{to:"/catalog",className:"btn-primary inline-flex",children:"Retour à la boutique"})]})}),e.jsx(v,{})]});const x=s.stock===void 0||(s.stock||0)>0,V=()=>{a>1&&u(a-1)},W=()=>{s.stock!==void 0&&a<s.stock||s.stock===void 0?u(a+1):l.error("Quantité maximale atteinte",{description:"Vous avez atteint le maximum de stock disponible.",duration:3e3})},U=()=>{s&&x?D(s,a)!==!1&&l.success("Ajouté au panier",{description:`${s.name} (${a}) a été ajouté à votre panier.`,duration:3e3}):l.error("Produit en rupture de stock",{description:"Ce produit n'est actuellement pas disponible.",duration:3e3})},J=()=>{g(s.id)?(Q(s.id),l.info("Retiré des favoris",{description:`${s.name} a été retiré de vos favoris.`,duration:3e3})):(q(s),l.success("Ajouté aux favoris",{description:`${s.name} a été ajouté à vos favoris.`,duration:3e3}))},H=()=>{navigator.clipboard.writeText(window.location.href),S(!0),l.success("Lien copié !",{description:"Le lien du produit a été copié dans le presse-papier.",duration:3e3}),setTimeout(()=>{S(!1)},3e3)},b=t=>{const r=encodeURIComponent(window.location.href),c=encodeURIComponent(`Découvrez ${s.name} - ChezFlora`);let i="";switch(t){case"facebook":i=`https://www.facebook.com/sharer/sharer.php?u=${r}`;break;case"twitter":i=`https://twitter.com/intent/tweet?url=${r}&text=${c}`;break;case"linkedin":i=`https://www.linkedin.com/sharing/share-offsite/?url=${r}`;break}window.open(i,"_blank","width=600,height=400")};return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("main",{className:"pt-32 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("button",{onClick:()=>I(-1),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors mb-6",children:[e.jsx(Y,{size:16})," Retour"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-muted",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[P],alt:s.name,className:`w-full h-full object-cover animate-fade-in ${x?"":"opacity-70"}`,onError:t=>{t.target.src="https://placehold.co/600x600/f9fafb/a1a1a9?text=Image+non+disponible"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx("p",{className:"text-gray-400",children:"Image non disponible"})})}),s.images&&s.images.length>1&&e.jsx("div",{className:"flex gap-4 flex-wrap",children:s.images.map((t,r)=>e.jsx("button",{className:`aspect-square rounded-md overflow-hidden w-20 border-2 transition-all ${P===r?"border-primary":"border-transparent"}`,onClick:()=>z(r),children:e.jsx("img",{src:t,alt:`${s.name} - vue ${r+1}`,className:"w-full h-full object-cover",onError:c=>{c.target.src="https://placehold.co/600x600/f9fafb/a1a1a9?text=Image+non+disponible"}})},r))})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-serif font-medium mb-2",children:s.name}),s.stock!==void 0&&e.jsx("div",{className:"flex-shrink-0",children:s.stock>0?e.jsxs("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-1 rounded-full flex items-center",children:[e.jsx(k,{size:12,className:"mr-1"}),"En stock"]}):e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-1 rounded-full flex items-center",children:[e.jsx(Z,{size:12,className:"mr-1"}),"Rupture"]})})]}),e.jsxs("p",{className:"text-2xl text-primary font-medium",children:[(R=s.price)==null?void 0:R.toFixed(2)," XAF"]}),s.sku&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["SKU: ",e.jsx("span",{className:"font-medium",children:s.sku})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-4",children:"Couleur"}),e.jsx("div",{className:"flex gap-3",children:y.map(t=>e.jsx("button",{className:`w-8 h-8 rounded-full flex items-center justify-center ${f.name===t.name?"ring-2 ring-offset-2 ring-primary":""}`,style:{backgroundColor:t.value},onClick:()=>F(t),"aria-label":t.name,children:f.name===t.name&&e.jsx(k,{size:16,className:`text-${t.name==="Blanc"?"black":"white"}`})},t.name))}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Couleur sélectionnée: ",e.jsx("span",{className:"font-medium",children:f.name})]})]}),(s.weight||s.dimensions)&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Détails du produit"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[s.weight&&e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Poids:"}),e.jsxs("span",{children:[s.weight," kg"]})]}),s.dimensions&&e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Dimensions:"}),e.jsxs("span",{children:[s.dimensions.length," × ",s.dimensions.width," × ",s.dimensions.height," cm"]})]})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Quantité"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"border border-border rounded-l-md p-3 hover:bg-muted transition-colors",onClick:V,disabled:a<=1,children:e.jsx(ie,{size:16})}),e.jsx("div",{className:"border-t border-b border-border px-6 py-2 flex items-center justify-center min-w-[60px]",children:a}),e.jsx("button",{className:"border border-border rounded-r-md p-3 hover:bg-muted transition-colors",onClick:W,disabled:s.stock!==void 0&&a>=s.stock,children:e.jsx(ne,{size:16})})]}),s.stock!==void 0&&s.stock>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s.stock," unités disponibles"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsxs("button",{className:`btn-primary flex-1 flex items-center justify-center gap-2 ${x?"":"opacity-50 cursor-not-allowed"}`,onClick:U,disabled:!x,children:[e.jsx(ee,{size:18})," Ajouter au panier"]}),e.jsxs("button",{className:`btn-ghost flex items-center justify-center gap-2 ${g(s.id)?"border-primary text-primary":""}`,onClick:J,children:[e.jsx(se,{size:18,fill:g(s.id)?"currentColor":"none"})," Favoris"]})]}),e.jsx(ae,{className:"my-4"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Partager:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"outline",size:"icon",onClick:()=>b("facebook"),"aria-label":"Partager sur Facebook",className:"rounded-full",children:e.jsx(te,{size:16})}),e.jsx(h,{variant:"outline",size:"icon",onClick:()=>b("twitter"),"aria-label":"Partager sur Twitter",className:"rounded-full",children:e.jsx(re,{size:16})}),e.jsx(h,{variant:"outline",size:"icon",onClick:()=>b("linkedin"),"aria-label":"Partager sur LinkedIn",className:"rounded-full",children:e.jsx(le,{size:16})}),e.jsx(h,{variant:"outline",size:"icon",onClick:H,"aria-label":"Copier le lien",className:"rounded-full",children:T?e.jsx(k,{size:16,className:"text-primary"}):e.jsx(oe,{size:16})})]})]})]})]}),j.length>0&&e.jsxs("div",{className:"mt-24",children:[e.jsx("h2",{className:"text-2xl font-serif mb-8",children:"Produits similaires"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(t=>e.jsx(B,{product:t},t.id))})]}),p.length>0&&e.jsxs("div",{className:"mt-24",children:[e.jsx("h2",{className:"text-2xl font-serif mb-8",children:"Récemment consultés"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:p.slice(0,4).map(t=>e.jsx(B,{product:t},t.id))})]}),j.length===0&&p.length===0&&e.jsxs("div",{className:"mt-24",children:[e.jsx("h2",{className:"text-2xl font-serif mb-8",children:"Vous pourriez aussi aimer"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.jsx("p",{className:"col-span-4 text-center text-muted-foreground py-12",children:"Aucune suggestion disponible pour le moment"})})]})]})}),e.jsx(v,{})]})};export{pe as default};
