import{i as Ue,r as n,j as e,ae as Be,I as f,$ as A,a1 as Oe,a2 as _e,B as o,a3 as qe,a4 as H,O as Ge,ab as N,C as ye,J as v}from"./index-D2Ipw2YP.js";import{C as Je,a as Ke,c as We,e as Xe}from"./card-CcKSh10K.js";import{T as be,a as we,b as y,c as d,d as Ce,e as c}from"./table-CBTVJ1-_.js";import{D as U,a as B,b as O,c as _,d as q,e as De}from"./dialog-Bh1R_dux.js";import{Q as b}from"./QuoteService-BK9A249e.js";import{T as Ye,a as Ze,b as T,c as P}from"./tabs-BkT1Db25.js";import{S as G,a as J,b as K,c as W,d as r}from"./select-CkDa4oYz.js";import{T as X}from"./textarea-BXYulBZ9.js";import{P as es,a as ss,b as as,C as ts}from"./popover-Rp5LT7RT.js";import{C as E}from"./clock-CXcy2a79.js";import{E as ls}from"./ellipsis-vertical-CGtGoFNX.js";import{F as Se}from"./file-pen-Ddvlinbf.js";import{S as Y}from"./send-XyahvlRz.js";import{C as Pe}from"./circle-alert-cp0tzuw5.js";import{C as rs}from"./calendar-DcxNRdDE.js";import{R as ns}from"./refresh-cw-DCuin_Kt.js";import{f as Ae}from"./format-BxPkkDNt.js";import{f as Te}from"./fr-BSv8k3uD.js";import"./index-BycQlkId.js";import"./index-DByQH1EK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Ue("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),j={pending:{label:"En attente",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(E,{className:"h-4 w-4"})},in_progress:{label:"En cours",color:"bg-blue-100 text-blue-800",icon:e.jsx(ns,{className:"h-4 w-4"})},sent:{label:"Devis envoyé",color:"bg-purple-100 text-purple-800",icon:e.jsx(Y,{className:"h-4 w-4"})},accepted:{label:"Accepté",color:"bg-green-100 text-green-800",icon:e.jsx(ye,{className:"h-4 w-4"})},declined:{label:"Refusé",color:"bg-red-100 text-red-800",icon:e.jsx(Pe,{className:"h-4 w-4"})},expired:{label:"Expiré",color:"bg-gray-100 text-gray-800",icon:e.jsx(is,{className:"h-4 w-4"})},completed:{label:"Complété",color:"bg-teal-100 text-teal-800",icon:e.jsx(ye,{className:"h-4 w-4"})}},k={event:{label:"Événement",color:"bg-blue-100 text-blue-800"},corporate:{label:"Entreprise",color:"bg-green-100 text-green-800"},decoration:{label:"Décoration",color:"bg-purple-100 text-purple-800"},custom:{label:"Personnalisé",color:"bg-orange-100 text-orange-800"}},Ts=()=>{var ue,xe,he,pe,je,ve,ge,fe;const[Q,M]=n.useState([]),[ke,Z]=n.useState(!0),[F,Ee]=n.useState(""),[m,Qe]=n.useState("all"),[u,Me]=n.useState("all"),[a,V]=n.useState(null),[Fe,ee]=n.useState(!1),[Ve,w]=n.useState(!1),[I,se]=n.useState(""),[ae,te]=n.useState(""),[Ie,C]=n.useState(!1),[L,le]=n.useState(""),[$,re]=n.useState(""),[x,D]=n.useState([{name:"",quantity:1,price:""}]),[S,ne]=n.useState(new Date(new Date().setDate(new Date().getDate()+14))),[ie,ce]=n.useState("Ce devis est valable jusqu'à la date d'expiration indiquée. Les prix sont en euros (€) et incluent la TVA.");n.useEffect(()=>{(async()=>{try{Z(!0);const t={};m!=="all"&&(t.status=m),u!=="all"&&(t.type=u);const l=await b.getAllQuotes(t);M(l)}catch(t){console.error("Error fetching quotes:",t),v.error("Erreur lors du chargement des devis")}finally{Z(!1)}})()},[m,u]);const R=Q.filter(s=>{var l,i,p,g,Ne;if(!F)return!0;const t=F.toLowerCase();return s.id&&s.id.toString().toLowerCase().includes(t)||((l=s.contactName)==null?void 0:l.toLowerCase().includes(t))||((i=s.contactEmail)==null?void 0:i.toLowerCase().includes(t))||((p=s.contactPhone)==null?void 0:p.toLowerCase().includes(t))||((g=s.type)==null?void 0:g.toLowerCase().includes(t))||((Ne=s.title)==null?void 0:Ne.toLowerCase().includes(t))}),h=s=>s?Ae(new Date(s),"dd MMMM yyyy",{locale:Te}):"N/A",Le=s=>{V(s),ee(!0)},oe=s=>{V(s),se(s.status),te(""),w(!0)},de=s=>{V(s),le(""),re(`Devis pour ${s.title||"votre projet"}`),D([{name:"",quantity:1,price:""}]),ne(new Date(new Date().setDate(new Date().getDate()+14))),ce("Ce devis est valable jusqu'à la date d'expiration indiquée. Les prix sont en euros (€) et incluent la TVA."),C(!0)},$e=()=>{D([...x,{name:"",quantity:1,price:""}])},Re=s=>{const t=[...x];t.splice(s,1),D(t)},z=(s,t,l)=>{const i=[...x];i[s][t]=l,D(i)},me=()=>x.reduce((s,t)=>{const l=parseFloat(t.price)||0,i=parseInt(t.quantity)||0;return s+l*i},0),ze=async()=>{if(a)try{if(!$||x.some(p=>!p.name||!p.price)){v.error("Veuillez remplir tous les champs obligatoires");return}const t={amount:L?parseFloat(L):me(),description:$,items:x,validUntil:S.toISOString(),termsAndConditions:ie};await b.addProposal(a.id,t);const l={};m!=="all"&&(l.status=m),u!=="all"&&(l.type=u);const i=await b.getAllQuotes(l);M(i),v.success("Proposition de devis envoyée avec succès"),C(!1)}catch(s){console.error("Error submitting proposal:",s),v.error("Erreur lors de l'envoi de la proposition")}},He=async()=>{if(!(!a||!I))try{await b.updateQuoteStatus(a.id,I,ae);const s={};m!=="all"&&(s.status=m),u!=="all"&&(s.type=u);const t=await b.getAllQuotes(s);M(t),v.success("Statut mis à jour avec succès"),w(!1)}catch(s){console.error("Error updating quote status:",s),v.error("Erreur lors de la mise à jour du statut")}};return ke&&Q.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Devis"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les demandes de devis personnalisés."})]})}),e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-10 bg-muted rounded-md w-full max-w-md"}),e.jsx("div",{className:"h-64 bg-muted rounded-md w-full"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Devis"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les demandes de devis personnalisés."})]})}),e.jsxs(Je,{children:[e.jsx(Ke,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(Be,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(f,{type:"search",placeholder:"Rechercher un devis...",className:"pl-8",value:F,onChange:s=>Ee(s.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(G,{value:m,onValueChange:Qe,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(K,{placeholder:"Filtrer par statut"})}),e.jsxs(W,{children:[e.jsx(r,{value:"all",children:"Tous les statuts"}),e.jsx(r,{value:"pending",children:"En attente"}),e.jsx(r,{value:"in_progress",children:"En cours"}),e.jsx(r,{value:"sent",children:"Devis envoyé"}),e.jsx(r,{value:"accepted",children:"Accepté"}),e.jsx(r,{value:"declined",children:"Refusé"}),e.jsx(r,{value:"expired",children:"Expiré"}),e.jsx(r,{value:"completed",children:"Complété"})]})]}),e.jsxs(G,{value:u,onValueChange:Me,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(K,{placeholder:"Filtrer par type"})}),e.jsxs(W,{children:[e.jsx(r,{value:"all",children:"Tous les types"}),e.jsx(r,{value:"event",children:"Événement"}),e.jsx(r,{value:"corporate",children:"Entreprise"}),e.jsx(r,{value:"decoration",children:"Décoration"}),e.jsx(r,{value:"custom",children:"Personnalisé"})]})]})]})]})}),e.jsx(We,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsxs(y,{children:[e.jsx(d,{children:"Référence"}),e.jsx(d,{children:"Client"}),e.jsx(d,{children:"Type"}),e.jsx(d,{children:"Date"}),e.jsx(d,{className:"text-center",children:"Statut"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(Ce,{children:R.length>0?R.map(s=>{var t,l,i,p,g;return e.jsxs(y,{children:[e.jsxs(c,{className:"font-medium",children:["#",s.id]}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{children:s.contactName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.contactEmail})]})}),e.jsx(c,{children:e.jsx(A,{variant:"outline",className:`${((t=k[s.type])==null?void 0:t.color)||"bg-gray-100 text-gray-800"}`,children:((l=k[s.type])==null?void 0:l.label)||s.type})}),e.jsx(c,{children:h(s.createdAt)}),e.jsx(c,{className:"text-center",children:e.jsxs(A,{variant:"outline",className:`${((i=j[s.status])==null?void 0:i.color)||"bg-gray-100 text-gray-800"} flex gap-1 items-center mx-auto`,children:[((p=j[s.status])==null?void 0:p.icon)||e.jsx(E,{className:"h-4 w-4"}),((g=j[s.status])==null?void 0:g.label)||s.status]})}),e.jsx(c,{className:"text-right",children:e.jsxs(Oe,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(ls,{className:"h-4 w-4"})})}),e.jsxs(qe,{align:"end",children:[e.jsxs(H,{onClick:()=>Le(s),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Voir détails"]}),e.jsxs(H,{onClick:()=>oe(s),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Mettre à jour statut"]}),(s.status==="pending"||s.status==="in_progress")&&e.jsxs(H,{onClick:()=>de(s),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Créer proposition"]})]})]})})]},s.id)}):e.jsx(y,{children:e.jsx(c,{colSpan:6,className:"h-24 text-center",children:"Aucun devis trouvé."})})})]})})}),e.jsx(Xe,{className:"flex items-center justify-between border-t p-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Affichage de ",R.length," sur ",Q.length," devis"]})})]}),e.jsx(U,{open:Fe,onOpenChange:ee,children:e.jsxs(B,{className:"sm:max-w-[700px]",children:[e.jsxs(O,{children:[e.jsx(_,{children:"Détails du devis"}),e.jsx(q,{children:a&&`Référence #${a.id} • ${h(a==null?void 0:a.createdAt)}`})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(A,{variant:"outline",className:`${((ue=j[a.status])==null?void 0:ue.color)||"bg-gray-100 text-gray-800"} flex gap-1 items-center`,children:[((xe=j[a.status])==null?void 0:xe.icon)||e.jsx(E,{className:"h-4 w-4"}),((he=j[a.status])==null?void 0:he.label)||a.status]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{size:"sm",onClick:()=>oe(a),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Statut"]}),(a.status==="pending"||a.status==="in_progress")&&e.jsxs(o,{size:"sm",variant:"secondary",onClick:()=>de(a),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Proposer"]})]})]}),e.jsxs(Ye,{defaultValue:"details",children:[e.jsxs(Ze,{className:"mb-4",children:[e.jsx(T,{value:"details",children:"Détails"}),e.jsx(T,{value:"customer",children:"Client"}),a.proposal&&e.jsx(T,{value:"proposal",children:"Proposition"}),e.jsx(T,{value:"history",children:"Historique"})]}),e.jsxs(P,{value:"details",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Informations générales"}),e.jsxs("div",{className:"text-sm p-3 bg-muted/50 rounded-lg space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Titre:"})," ",a.title||"Non spécifié"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",e.jsx(A,{variant:"outline",className:`${((pe=k[a.type])==null?void 0:pe.color)||"bg-gray-100 text-gray-800"} ml-1`,children:((je=k[a.type])==null?void 0:je.label)||a.type})]}),a.eventDate&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date de l'événement:"})," ",h(a.eventDate)]}),a.budget&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Budget:"})," ",a.budget]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Dates"}),e.jsxs("div",{className:"text-sm p-3 bg-muted/50 rounded-lg space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Créé le:"})," ",h(a.createdAt)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Mis à jour le:"})," ",h(a.updatedAt)]}),a.status==="accepted"&&a.acceptedAt&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Accepté le:"})," ",h(a.acceptedAt)]}),a.status==="declined"&&a.declinedAt&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Refusé le:"})," ",h(a.declinedAt)]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Description du projet"}),e.jsx("div",{className:"text-sm p-3 bg-muted/50 rounded-lg",children:a.description||"Aucune description fournie."})]})]}),e.jsxs(P,{value:"customer",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Informations client"}),e.jsxs("div",{className:"text-sm p-3 bg-muted/50 rounded-lg space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nom:"})," ",a.contactName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",e.jsx("a",{href:`mailto:${a.contactEmail}`,className:"text-primary hover:underline",children:a.contactEmail})]}),a.contactPhone&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",e.jsx("a",{href:`tel:${a.contactPhone}`,className:"text-primary hover:underline",children:a.contactPhone})]})]})]}),a.notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Notes client"}),e.jsx("div",{className:"text-sm p-3 bg-muted/50 rounded-lg",children:a.notes})]})]}),a.proposal&&e.jsxs(P,{value:"proposal",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Détails de la proposition"}),e.jsxs("div",{className:"text-sm p-3 bg-muted/50 rounded-lg space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Montant total:"})," ",((ve=a.proposal.amount)==null?void 0:ve.toFixed(2))||"0.00"," €"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Valide jusqu'au:"})," ",h(a.proposal.validUntil)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Description:"})," ",a.proposal.description]})]})]}),((ge=a.proposal.items)==null?void 0:ge.length)>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Éléments du devis"}),e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsxs(y,{children:[e.jsx(d,{children:"Désignation"}),e.jsx(d,{className:"text-center w-24",children:"Quantité"}),e.jsx(d,{className:"text-right w-24",children:"Prix"}),e.jsx(d,{className:"text-right w-32",children:"Total"})]})}),e.jsx(Ce,{children:a.proposal.items.map((s,t)=>e.jsxs(y,{children:[e.jsx(c,{children:s.name}),e.jsx(c,{className:"text-center",children:s.quantity}),e.jsxs(c,{className:"text-right",children:[parseFloat(s.price).toFixed(2)," €"]}),e.jsxs(c,{className:"text-right",children:[(s.quantity*s.price).toFixed(2)," €"]})]},t))})]})})]}),a.proposal.termsAndConditions&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Conditions générales"}),e.jsx("div",{className:"text-sm p-3 bg-muted/50 rounded-lg",children:a.proposal.termsAndConditions})]})]}),e.jsx(P,{value:"history",className:"space-y-4",children:((fe=a.statusHistory)==null?void 0:fe.length)>0?a.statusHistory.map((s,t)=>{var l,i;return e.jsxs("div",{className:"relative pl-8 pb-4",children:[t<a.statusHistory.length-1&&e.jsx("div",{className:"absolute left-3 top-3 h-full w-px bg-muted-foreground/30"}),e.jsx("div",{className:"absolute left-0 top-0 h-6 w-6 rounded-full bg-background flex items-center justify-center border",children:((l=j[s.status])==null?void 0:l.icon)||e.jsx(E,{className:"h-3 w-3"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:((i=j[s.status])==null?void 0:i.label)||s.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleString("fr-FR")})]}),s.notes&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]})]},t)}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun historique disponible"})})]})]})]})}),e.jsx(U,{open:Ve,onOpenChange:w,children:e.jsxs(B,{children:[e.jsxs(O,{children:[e.jsx(_,{children:"Mettre à jour le statut"}),e.jsx(q,{children:a&&`Devis #${a.id}`})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Choisir un nouveau statut"}),e.jsxs(G,{value:I,onValueChange:se,children:[e.jsx(J,{children:e.jsx(K,{placeholder:"Sélectionner un statut"})}),e.jsxs(W,{children:[e.jsx(r,{value:"pending",children:"En attente"}),e.jsx(r,{value:"in_progress",children:"En cours"}),e.jsx(r,{value:"sent",children:"Devis envoyé"}),e.jsx(r,{value:"accepted",children:"Accepté"}),e.jsx(r,{value:"declined",children:"Refusé"}),e.jsx(r,{value:"expired",children:"Expiré"}),e.jsx(r,{value:"completed",children:"Complété"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes (optionnel)"}),e.jsx(X,{placeholder:"Ajouter des notes sur la mise à jour du statut",value:ae,onChange:s=>te(s.target.value)})]})]}),e.jsxs(De,{children:[e.jsx(o,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),e.jsx(o,{onClick:He,children:"Mettre à jour"})]})]})}),e.jsx(U,{open:Ie,onOpenChange:C,children:e.jsxs(B,{className:"sm:max-w-[700px]",children:[e.jsxs(O,{children:[e.jsx(_,{children:"Créer une proposition de devis"}),e.jsx(q,{children:a&&`Pour la demande #${a.id} de ${a.contactName}`})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Description"}),e.jsx(X,{placeholder:"Description générale de la proposition",value:$,onChange:s=>re(s.target.value),className:"min-h-[80px]",required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(N,{children:"Éléments du devis"}),e.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:$e,children:"Ajouter un élément"})]}),e.jsx("div",{className:"space-y-4",children:x.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(f,{placeholder:"Désignation",value:s.name,onChange:l=>z(t,"name",l.target.value),required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsx(f,{type:"number",min:"1",placeholder:"Qté",value:s.quantity,onChange:l=>z(t,"quantity",l.target.value),required:!0})}),e.jsx("div",{className:"col-span-3",children:e.jsx(f,{type:"number",step:"0.01",min:"0",placeholder:"Prix €",value:s.price,onChange:l=>z(t,"price",l.target.value),required:!0})}),e.jsx("div",{className:"col-span-1 flex items-center justify-center h-full",children:e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>Re(t),disabled:x.length===1,children:e.jsx(Pe,{className:"h-4 w-4"})})})]},t))}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Total:"}),e.jsxs("span",{children:[me().toFixed(2)," €"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Montant total (optionnel)"}),e.jsx(f,{type:"number",step:"0.01",min:"0",placeholder:"Laisser vide pour utiliser le total calculé",value:L,onChange:s=>le(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Laissez ce champ vide pour utiliser le total calculé automatiquement, ou entrez une valeur personnalisée."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Valide jusqu'au"}),e.jsxs(es,{children:[e.jsx(ss,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),S?Ae(S,"PPP",{locale:Te}):"Sélectionner une date"]})}),e.jsx(as,{className:"w-auto p-0",children:e.jsx(ts,{mode:"single",selected:S,onSelect:s=>ne(s),initialFocus:!0,disabled:s=>s<new Date})})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Conditions générales"}),e.jsx(X,{value:ie,onChange:s=>ce(s.target.value),className:"min-h-[100px]"})]})]}),e.jsxs(De,{children:[e.jsx(o,{variant:"outline",onClick:()=>C(!1),children:"Annuler"}),e.jsx(o,{onClick:ze,children:"Envoyer la proposition"})]})]})})]})};export{Ts as default};
