import{i as T,r as h,j as e,s as v,a0 as z,z as l,v as P,B as j,x as V,y as o,D as c,E as d,G as m,I as u,K as p,a1 as E,a2 as q,a3 as R,a4 as b,Q as B,J as g}from"./index-D2Ipw2YP.js";import{C as I,a as J,b as H,d as G,c as O,e as $}from"./card-CcKSh10K.js";import{D as K,a as Q,b as _,c as U,d as W,e as X,f as Y}from"./dialog-Bh1R_dux.js";import{S as Z,a as ee,b as se,c as re,d as k}from"./select-CkDa4oYz.js";import{S as ie}from"./switch-BrxpkcwD.js";import{A as ne,a as te,b as ae,c as le,d as oe,e as ce,f as de,g as me,h as pe}from"./alert-dialog-IJ8aKrw7.js";import{P as ue}from"./plus--fUcP0bL.js";import{E as xe}from"./ellipsis-vertical-CGtGoFNX.js";import{T as he}from"./trash-2-BNQ_4_77.js";import"./index-BycQlkId.js";import"./index-DByQH1EK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=T("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),fe=z("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=h.forwardRef(({className:r,variant:t,...i},x)=>e.jsx("div",{ref:x,role:"alert",className:v(fe({variant:t}),r),...i}));y.displayName="Alert";const ge=h.forwardRef(({className:r,...t},i)=>e.jsx("h5",{ref:i,className:v("mb-1 font-medium leading-none tracking-tight",r),...t}));ge.displayName="AlertTitle";const N=h.forwardRef(({className:r,...t},i)=>e.jsx("div",{ref:i,className:v("text-sm [&_p]:leading-relaxed",r),...t}));N.displayName="AlertDescription";const ye=[{id:"addr-1",nickname:"Domicile",type:"shipping",firstName:"Jean",lastName:"Dupont",addressLine1:"123 Rue de Paris",addressLine2:"Apt 4B",city:"Paris",postalCode:"75001",country:"France",phone:"0123456789",isDefault:!0},{id:"addr-2",nickname:"Bureau",type:"shipping",firstName:"Jean",lastName:"Dupont",addressLine1:"45 Avenue des Champs-Élysées",addressLine2:"Étage 3",city:"Paris",postalCode:"75008",country:"France",phone:"0123456789",isDefault:!1},{id:"addr-3",nickname:"Facturation",type:"billing",firstName:"Jean",lastName:"Dupont",addressLine1:"123 Rue de Paris",addressLine2:"Apt 4B",city:"Paris",postalCode:"75001",country:"France",phone:"0123456789",isDefault:!0}],Ne=l.object({nickname:l.string().min(1,"Le nom est requis"),type:l.enum(["shipping","billing"]),firstName:l.string().min(1,"Le prénom est requis"),lastName:l.string().min(1,"Le nom de famille est requis"),addressLine1:l.string().min(1,"L'adresse est requise"),addressLine2:l.string().optional(),city:l.string().min(1,"La ville est requise"),postalCode:l.string().min(1,"Le code postal est requis"),country:l.string().min(1,"Le pays est requis"),phone:l.string().min(1,"Le téléphone est requis"),isDefault:l.boolean().default(!1)}),Te=()=>{const[r,t]=h.useState(ye),[i,x]=h.useState(null),[F,f]=h.useState(!1),n=P({resolver:B(Ne),defaultValues:{nickname:"",type:"shipping",firstName:"",lastName:"",addressLine1:"",addressLine2:"",city:"",postalCode:"",country:"France",phone:"",isDefault:!1}}),S=()=>{n.reset({nickname:"",type:"shipping",firstName:"",lastName:"",addressLine1:"",addressLine2:"",city:"",postalCode:"",country:"France",phone:"",isDefault:!1}),x(null),f(!0)},D=s=>{n.reset({nickname:s.nickname,type:s.type,firstName:s.firstName,lastName:s.lastName,addressLine1:s.addressLine1,addressLine2:s.addressLine2,city:s.city,postalCode:s.postalCode,country:s.country,phone:s.phone,isDefault:s.isDefault}),x(s),f(!0)},C=s=>{t(r.filter(a=>a.id!==s)),g.success("Adresse supprimée",{description:"L'adresse a été supprimée avec succès."})},M=s=>{if(s.isDefault&&t(r.map(a=>a.type===s.type&&(!i||a.id!==i.id)?{...a,isDefault:!1}:a)),i)t(r.map(a=>a.id===i.id?{id:a.id,nickname:s.nickname,type:s.type,firstName:s.firstName,lastName:s.lastName,addressLine1:s.addressLine1,addressLine2:s.addressLine2||"",city:s.city,postalCode:s.postalCode,country:s.country,phone:s.phone,isDefault:s.isDefault}:a)),g.success("Adresse mise à jour",{description:"Vos modifications ont été enregistrées."});else{const a={id:`addr-${Date.now()}`,nickname:s.nickname,type:s.type,firstName:s.firstName,lastName:s.lastName,addressLine1:s.addressLine1,addressLine2:s.addressLine2||"",city:s.city,postalCode:s.postalCode,country:s.country,phone:s.phone,isDefault:s.isDefault};t([...r,a]),g.success("Adresse ajoutée",{description:"La nouvelle adresse a été ajoutée avec succès."})}f(!1)},A=r.filter(s=>s.type==="shipping"),L=r.filter(s=>s.type==="billing");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Mes adresses"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez vos adresses de livraison et de facturation."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Adresses de livraison"}),e.jsxs(j,{size:"sm",onClick:S,children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Ajouter une adresse"]})]}),A.length===0?e.jsx(y,{children:e.jsx(N,{children:"Vous n'avez pas encore ajouté d'adresse de livraison."})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:A.map(s=>e.jsx(w,{address:s,onEdit:()=>D(s),onDelete:()=>C(s.id)},s.id))})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-lg font-medium",children:"Adresses de facturation"})}),L.length===0?e.jsx(y,{children:e.jsx(N,{children:"Vous n'avez pas encore ajouté d'adresse de facturation."})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:L.map(s=>e.jsx(w,{address:s,onEdit:()=>D(s),onDelete:()=>C(s.id)},s.id))})]}),e.jsx(K,{open:F,onOpenChange:f,children:e.jsxs(Q,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx(U,{children:i?"Modifier l'adresse":"Ajouter une adresse"}),e.jsx(W,{children:i?"Modifiez les informations de l'adresse ci-dessous.":"Remplissez les informations pour ajouter une nouvelle adresse."})]}),e.jsx(V,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(M),className:"space-y-4",children:[e.jsx(o,{control:n.control,name:"nickname",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Nom de l'adresse"}),e.jsx(m,{children:e.jsx(u,{placeholder:"Ex: Domicile, Bureau...",...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"type",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Type d'adresse"}),e.jsxs(Z,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(m,{children:e.jsx(ee,{children:e.jsx(se,{placeholder:"Sélectionnez un type"})})}),e.jsxs(re,{children:[e.jsx(k,{value:"shipping",children:"Livraison"}),e.jsx(k,{value:"billing",children:"Facturation"})]})]}),e.jsx(p,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{control:n.control,name:"firstName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Prénom"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"lastName",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Nom"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})})]}),e.jsx(o,{control:n.control,name:"addressLine1",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Adresse"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"addressLine2",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Complément d'adresse"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{control:n.control,name:"city",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Ville"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"postalCode",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Code postal"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})})]}),e.jsx(o,{control:n.control,name:"country",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Pays"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"phone",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Téléphone"}),e.jsx(m,{children:e.jsx(u,{...s})}),e.jsx(p,{})]})}),e.jsx(o,{control:n.control,name:"isDefault",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Adresse par défaut"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Définir comme adresse par défaut pour ce type"})]}),e.jsx(m,{children:e.jsx(ie,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(j,{type:"button",variant:"outline",children:"Annuler"})}),e.jsx(j,{type:"submit",children:i?"Mettre à jour":"Ajouter"})]})]})})]})})]})},w=({address:r,onEdit:t,onDelete:i})=>e.jsxs(I,{children:[e.jsx(J,{className:"pb-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-base",children:r.nickname}),e.jsx(G,{children:r.isDefault&&`Adresse ${r.type==="shipping"?"de livraison":"de facturation"} par défaut`})]}),e.jsxs(E,{children:[e.jsx(q,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(R,{align:"end",children:[e.jsxs(b,{onClick:t,children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e.jsxs(ne,{children:[e.jsx(te,{asChild:!0,children:e.jsxs(b,{onSelect:x=>x.preventDefault(),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Supprimer"]})}),e.jsxs(ae,{children:[e.jsxs(le,{children:[e.jsx(oe,{children:"Confirmer la suppression"}),e.jsx(ce,{children:"Êtes-vous sûr de vouloir supprimer cette adresse ? Cette action ne peut pas être annulée."})]}),e.jsxs(de,{children:[e.jsx(me,{children:"Annuler"}),e.jsx(pe,{onClick:i,children:"Supprimer"})]})]})]})]})]})]})}),e.jsx(O,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[r.firstName," ",r.lastName]}),e.jsx("p",{children:r.addressLine1}),r.addressLine2&&e.jsx("p",{children:r.addressLine2}),e.jsxs("p",{children:[r.postalCode," ",r.city]}),e.jsx("p",{children:r.country}),e.jsx("p",{className:"pt-1",children:r.phone})]})}),e.jsx($,{className:"pt-0",children:e.jsx(j,{variant:"outline",size:"sm",className:"w-full",onClick:t,children:"Modifier"})})]});export{Te as default};
