import{z as u,r as d,v as Z,Q as ee,j as e,x as se,y as v,D as N,E as p,G as w,I as T,K as b,ab as U,B as c,X as ae,ae as re,a1 as k,a2 as E,a3 as B,a4 as m,O as te,$ as le,J as P}from"./index-D2Ipw2YP.js";import{C as ne,a as ie,c as ce,e as de}from"./card-CcKSh10K.js";import{T as oe,a as me,b as M,c as y,d as xe,e as j}from"./table-CBTVJ1-_.js";import{D as O,a as R,b as $,c as H}from"./dialog-Bh1R_dux.js";import{T as q}from"./textarea-BXYulBZ9.js";import{S as Q,a as G,b as J,c as K,d as z}from"./select-CkDa4oYz.js";import{P as X}from"./plus--fUcP0bL.js";import{g as he}from"./blog-DN9nGdDB.js";import{F as ue}from"./filter-CPbTBQz0.js";import{E as je}from"./ellipsis-vertical-CGtGoFNX.js";import{S as ge}from"./square-pen-DqwtdDjd.js";import{T as fe}from"./trash-2-BNQ_4_77.js";import{C as ve}from"./calendar-DcxNRdDE.js";import{F as Ne}from"./file-text-DtHEMwOT.js";import{f as _}from"./format-BxPkkDNt.js";import"./index-BycQlkId.js";import"./index-DByQH1EK.js";const pe=u.object({title:u.string().min(5,{message:"Le titre doit contenir au moins 5 caractères"}),excerpt:u.string().min(20,{message:"Le résumé doit contenir au moins 20 caractères"}),content:u.string().min(50,{message:"Le contenu doit contenir au moins 50 caractères"}),authorName:u.string().min(3,{message:"Le nom de l'auteur doit contenir au moins 3 caractères"}),category:u.string({required_error:"Veuillez sélectionner une catégorie"}),status:u.enum(["draft","published"],{required_error:"Veuillez sélectionner un statut"})});function we({post:a,onSubmit:C,onCancel:g}){const[f,t]=d.useState((a==null?void 0:a.imageUrl)||""),[x,F]=d.useState((a==null?void 0:a.tags)||[]),[o,A]=d.useState(""),l=Z({resolver:ee(pe),defaultValues:{title:(a==null?void 0:a.title)||"",excerpt:(a==null?void 0:a.excerpt)||"",content:(a==null?void 0:a.content)||"",authorName:(a==null?void 0:a.authorName)||"",category:(a==null?void 0:a.category)||"",status:(a==null?void 0:a.status)||"draft"}}),h=r=>{const i={id:(a==null?void 0:a.id)||`post-${Date.now()}`,title:r.title,excerpt:r.excerpt,content:r.content,authorId:(a==null?void 0:a.authorId)||`auth-${Date.now()}`,authorName:r.authorName,publishDate:(a==null?void 0:a.publishDate)||new Date,status:r.status,imageUrl:f,category:r.category,tags:x};C(i)},S=()=>{o&&!x.includes(o)&&(F([...x,o]),A(""))},D=r=>{F(x.filter(i=>i!==r))},I=["Conseils d'entretien","Mariages","Saisons","Art floral","Nouveautés","Événements","Plantes d'intérieur"];return e.jsx(se,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{control:l.control,name:"title",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Titre de l'article"}),e.jsx(w,{children:e.jsx(T,{placeholder:"Titre accrocheur de l'article",...r})}),e.jsx(b,{})]})}),e.jsx(v,{control:l.control,name:"category",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Catégorie"}),e.jsxs(Q,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(w,{children:e.jsx(G,{children:e.jsx(J,{placeholder:"Sélectionner une catégorie"})})}),e.jsx(K,{children:I.map(i=>e.jsx(z,{value:i,children:i},i))})]}),e.jsx(b,{})]})}),e.jsx(v,{control:l.control,name:"status",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Statut"}),e.jsxs(Q,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(w,{children:e.jsx(G,{children:e.jsx(J,{placeholder:"Sélectionner un statut"})})}),e.jsxs(K,{children:[e.jsx(z,{value:"draft",children:"Brouillon"}),e.jsx(z,{value:"published",children:"Publié"})]})]}),e.jsx(b,{})]})}),e.jsx(v,{control:l.control,name:"authorName",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Auteur"}),e.jsx(w,{children:e.jsx(T,{placeholder:"Nom de l'auteur",...r})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Image de couverture"}),e.jsx(T,{type:"url",placeholder:"URL de l'image",value:f,onChange:r=>t(r.target.value)}),f&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:f,alt:"Image de couverture",className:"h-32 w-full object-cover rounded-md border",onError:r=>{r.target.src="/placeholder.svg"}})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{control:l.control,name:"excerpt",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Résumé"}),e.jsx(w,{children:e.jsx(q,{placeholder:"Un bref résumé de l'article...",className:"min-h-[80px]",...r})}),e.jsx(b,{})]})}),e.jsx(v,{control:l.control,name:"content",render:({field:r})=>e.jsxs(N,{children:[e.jsx(p,{children:"Contenu"}),e.jsx(w,{children:e.jsx(q,{placeholder:"Contenu détaillé de l'article...",className:"min-h-[150px]",...r})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Tags"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(T,{type:"text",placeholder:"Ajouter un tag",value:o,onChange:r=>A(r.target.value),onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),S())}}),e.jsx(c,{type:"button",variant:"outline",size:"icon",onClick:S,children:e.jsx(X,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x.map((r,i)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-muted text-muted-foreground px-2 py-1 rounded-md",children:[e.jsx("span",{children:r}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>D(r),children:e.jsx(ae,{className:"h-3 w-3"})})]},i))})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:g,children:"Annuler"}),e.jsx(c,{type:"submit",children:a?"Mettre à jour":"Créer l'article"})]})]})})}const Be=()=>{const[a,C]=d.useState(he()),[g,f]=d.useState(""),[t,x]=d.useState(null),[F,o]=d.useState(!1),[A,l]=d.useState(!1),[h,S]=d.useState(null),D=a.filter(s=>{var n;return s.title.toLowerCase().includes(g.toLowerCase())||s.category.toLowerCase().includes(g.toLowerCase())||((n=s.tags)==null?void 0:n.some(L=>L.toLowerCase().includes(g.toLowerCase())))}),I=s=>{x(s),o(!0)},r=s=>{C(a.filter(n=>n.id!==s)),P.success("Article supprimé",{description:"L'article a été supprimé avec succès."})},i=s=>{const n={id:`${s.id}`,title:s.title,excerpt:s.excerpt,content:s.content||"",authorId:`auth-${Date.now()}`,authorName:s.author,publishDate:new Date(s.date),status:"published",imageUrl:s.imageUrl,category:s.category,tags:s.tags||[]};S(n),l(!0)},W=()=>{S(null),l(!0)},Y=s=>{const n={id:h?Number(h.id):Date.now(),title:s.title,excerpt:s.excerpt,content:s.content,author:s.authorName,date:_(s.publishDate,"yyyy-MM-dd"),category:s.category,imageUrl:s.imageUrl,tags:s.tags};h?(C(a.map(L=>L.id===n.id?n:L)),P.success("Article mis à jour",{description:"L'article a été mis à jour avec succès."})):(C([...a,n]),P.success("Article ajouté",{description:"L'article a été ajouté avec succès."})),l(!1)},V=s=>{try{return _(new Date(s),"dd/MM/yyyy")}catch{return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Blog"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les articles de votre blog."})]}),e.jsxs(c,{onClick:W,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Nouvel article"]})]}),e.jsxs(ne,{children:[e.jsx(ie,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(re,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(T,{type:"search",placeholder:"Rechercher un article...",className:"pl-8",value:g,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Filtres"]}),e.jsxs(k,{children:[e.jsx(E,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:"Catégories"})}),e.jsxs(B,{align:"end",children:[e.jsx(m,{children:"Tous les articles"}),e.jsx(m,{children:"Conseils"}),e.jsx(m,{children:"Tendances"}),e.jsx(m,{children:"Événements"}),e.jsx(m,{children:"Inspiration"})]})]})]})]})}),e.jsx(ce,{children:e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(oe,{children:[e.jsx(me,{children:e.jsxs(M,{children:[e.jsx(y,{className:"w-[80px]",children:"Image"}),e.jsx(y,{children:"Titre"}),e.jsx(y,{children:"Catégorie"}),e.jsx(y,{children:"Auteur"}),e.jsx(y,{className:"text-center",children:"Date"}),e.jsx(y,{className:"w-[70px]",children:"Actions"})]})}),e.jsxs(xe,{children:[D.map(s=>e.jsxs(M,{children:[e.jsx(j,{children:e.jsx("div",{className:"h-12 w-12 rounded-md overflow-hidden bg-muted",children:e.jsx("img",{src:s.imageUrl,alt:s.title,className:"h-full w-full object-cover"})})}),e.jsx(j,{className:"font-medium",children:s.title}),e.jsx(j,{className:"capitalize",children:s.category}),e.jsx(j,{children:s.author}),e.jsx(j,{className:"text-center",children:V(s.date)}),e.jsx(j,{children:e.jsxs(k,{children:[e.jsx(E,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(B,{align:"end",children:[e.jsxs(m,{onClick:()=>I(s),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Voir"]}),e.jsxs(m,{onClick:()=>i(s),children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e.jsxs(m,{className:"text-destructive focus:text-destructive",onClick:()=>r(s.id),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},s.id)),D.length===0&&e.jsx(M,{children:e.jsx(j,{colSpan:7,className:"h-24 text-center",children:"Aucun article trouvé."})})]})]})})}),e.jsxs(de,{className:"flex items-center justify-between border-t p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Affichage de ",D.length," sur ",a.length," articles"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:!0,children:"Précédent"}),e.jsx(c,{variant:"outline",size:"sm",disabled:!0,children:"Suivant"})]})]})]}),e.jsx(O,{open:F,onOpenChange:o,children:e.jsxs(R,{className:"sm:max-w-[725px] max-h-[85vh] overflow-y-auto",children:[e.jsx($,{children:e.jsx(H,{children:t==null?void 0:t.title})}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-lg",children:e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:V(t.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:t.category})]})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-medium",children:["Auteur: ",t.author]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Résumé"}),e.jsx("p",{children:t.excerpt})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Contenu"}),e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{children:t.content})})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((s,n)=>e.jsx(le,{variant:"secondary",children:s},n))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(c,{onClick:()=>o(!1),children:"Fermer"})})]})]})}),e.jsx(O,{open:A,onOpenChange:l,children:e.jsxs(R,{className:"sm:max-w-[725px] max-h-[85vh] overflow-y-auto",children:[e.jsx($,{children:e.jsx(H,{children:h?"Modifier un article":"Ajouter un article"})}),e.jsx(we,{post:h,onSubmit:Y,onCancel:()=>l(!1)})]})})]})};export{Be as default};
